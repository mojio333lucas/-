<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºæ…§è—¥ææœå°‹</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: #f4f7f6; padding: 20px; max-width: 800px; margin: 0 auto; min-height: 100vh; }
        .nav { margin-bottom: 20px; }
        .nav a { text-decoration: none; color: #2c5e40; font-weight: bold; font-size: 1.1rem; }
        
        h1 { color: #2c5e40; text-align: center; margin-bottom: 30px; }

        /* æœå°‹æ¡†å®¹å™¨ (ç‚ºäº†å®šä½ä¸‹æ‹‰é¸å–®) */
        .search-container { position: relative; width: 100%; max-width: 600px; margin: 0 auto 30px auto; }
        
        .search-box { 
            width: 100%; 
            padding: 15px 20px; 
            font-size: 1.2rem; 
            border: 2px solid #ddd; 
            border-radius: 30px; 
            box-sizing: border-box; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            outline: none;
            transition: border-color 0.3s;
        }
        .search-box:focus { border-color: #2c5e40; }

        /* è‡ªå‹•å®Œæˆå»ºè­°åˆ—è¡¨ (Google é¢¨æ ¼) */
        .suggestions-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 15px 15px;
            z-index: 99;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
            display: none; /* é è¨­éš±è— */
        }

        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .suggestion-item:last-child { border-bottom: none; }
        .suggestion-item:hover { background-color: #f1f8e9; }
        
        .s-main { font-weight: bold; font-size: 1.1rem; color: #333; }
        .s-sub { font-size: 0.85rem; color: #888; }

        /* çµæœå¡ç‰‡æ¨£å¼ */
        .result-card { 
            background: white; 
            padding: 25px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            border-left: 6px solid #2c5e40; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); 
            animation: fadeIn 0.3s ease;
        }
        .r-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .r-name { font-size: 1.8rem; font-weight: bold; color: #2c5e40; }
        .r-family { color: #666; font-style: italic; }
        
        .r-detail-row { margin-bottom: 8px; font-size: 1.05rem; line-height: 1.6; }
        .label { font-weight: bold; color: #555; display: inline-block; width: 80px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="nav">
    <a href="index.html">â¬… å›é¦–é </a>
</div>

<h1>ğŸ” è—¥æè³‡æ–™åº«</h1>

<div class="search-container">
    <input type="text" id="searchInput" class="search-box" placeholder="è¼¸å…¥è—¥åã€ç§‘å(En/Ch)æˆ–æˆåˆ†..." autocomplete="off">
    <div id="suggestions" class="suggestions-list"></div>
</div>

<div id="results-area"></div>

<script>
    // --- è³‡æ–™åº« (è«‹ä¿æŒèˆ‡ quiz.html ä¸€è‡´) ---
    // ç‚ºäº†è®“æœå°‹æ›´å¼·å¤§ï¼Œå»ºè­°åœ¨ family æ¬„ä½åŒæ™‚å¯«ä¸Š ä¸­æ–‡+è‹±æ–‡
    // ä¾‹å¦‚: "Liliaceae (ç™¾åˆç§‘)"
    const db = [
        {name:"çŸ¥æ¯", family:"Liliaceae (ç™¾åˆç§‘)", drug:"Anemarrhenae Rhizoma", sci:"Anemarrhena asphodeloides", note:"å« saponin (çš‚ç´ )"},
        {name:"ç”˜è‰", family:"Fabaceae (è±†ç§‘)", drug:"Glycyrrhizae Radix", sci:"Glycyrrhiza uralensis", note:"åœ‹è€ã€å« Glycyrrhizin"},
        {name:"é»ƒé€£", family:"Ranunculaceae (æ¯›èŒ›ç§‘)", drug:"Coptidis Rhizoma", sci:"Coptis chinensis", note:"ç„¡ saponinã€æ ¹å¦‚é€£ç "},
        {name:"å·èŠ", family:"Apiaceae (ç¹–å½¢ç§‘)", drug:"Chuanxiong Rhizoma", sci:"Ligusticum chuanxiong", note:"ç„¡ Saponin"},
        {name:"ä½•é¦–çƒ", family:"Polygonaceae (è“¼ç§‘)", drug:"Polygoni Multiflori Radix", sci:"Polygonum multiflorum", note:"é›²éŒ¦èŠ±ç´‹ã€é¦¬è‚çŸ³"},
        {name:"åœ°é»ƒ", family:"Scrophulariaceae (ç„åƒç§‘)", drug:"Rehmanniae Radix", sci:"Rehmannia glutinosa", note:"æ‡·æ…¶åœ°é»ƒ"},
        {name:"ç´°è¾›", family:"Aristolochiaceae (é¦¬å…œéˆ´ç§‘)", drug:"Asiasari Radix", sci:"Asarum sieboldii", note:"å–®ç”¨ä¸å¯éåŠéŒ¢"},
        {name:"ç™½é ­ç¿", family:"Ranunculaceae (æ¯›èŒ›ç§‘)", drug:"Pulsatillae Radix", sci:"Pulsatilla chinensis", note:"å« saponin"},
        {name:"åœŸèŒ¯è‹“", family:"Liliaceae (ç™¾åˆç§‘)", drug:"Smilacis Glabrae Rhizoma", sci:"Smilax glabra", note:"å« saponinã€diosgenin"},
        {name:"èŒ¯è‹“", family:"Polyporaceae (å¤šå­”èŒç§‘)", drug:"Poria", sci:"Poria cocos", note:"èŒæ ¸ã€ä¹…æœå®‰é­‚"},
        {name:"é¦¬å‹ƒ", family:"Lycoperdaceae (é¦¬å‹ƒç§‘)", drug:"Lasiosphaera", sci:"Calvatia gigantea", note:"é¦¬å±åŒ…"},
        {name:"ç‰›é»ƒ", family:"Bovidae (ç‰›ç§‘)", drug:"Bezoar Bovis", sci:"Bos taurus", note:"ç‰›è†½å›Šä¸­çš„çµçŸ³"},
        {name:"é‡‘éŠ€èŠ±", family:"Caprifoliaceae (å¿å†¬ç§‘)", drug:"Lonicerae Flos", sci:"Lonicera japonica", note:"å¿å†¬-å‡Œå†¬ä¸å‡‹"},
        {name:"æ´‹é‡‘èŠ±", family:"Solanaceae (èŒ„ç§‘)", drug:"Daturae Flos", sci:"Datura metel", note:"éº»æ²¸æ•£ã€Tropane alkaloids"},
        {name:"ç›Šæ¯è‰", family:"Lamiaceae (è„£å½¢ç§‘)", drug:"Leonuri Herba", sci:"Leonurus heterophyllus", note:"å……è”š(æœå¯¦)"},
        {name:"é­šè…¥è‰", family:"Saururaceae (ä¸‰ç™½è‰ç§‘)", drug:"Houttuyniae Herba", sci:"Houttuynia cordata", note:"è•ºèœ"},
        {name:"éº»é»ƒ", family:"Ephedraceae (éº»é»ƒç§‘)", drug:"Ephedrae Herba", sci:"Ephedra sinica", note:"å« Ephedrine(æ”¯æ°£ç®¡æ“´å¼µ)ã€è£¸å­æ¤ç‰©"},
        {name:"å…«è§’èŒ´é¦™", family:"Magnoliaceae (æœ¨è˜­ç§‘)", drug:"Anisi Stellati Fructus", sci:"Illicium verum", note:"å« Anetholeã€æ®ç™¼æ²¹"},
        {name:"æ±ºæ˜å­", family:"Fabaceae (è±†ç§‘)", drug:"Cassiae Semen", sci:"Cassia obtusifolia", note:"å­å½¢ä¼¼é¦¬è¹„"},
        {name:"è»Šå‰è‰", family:"Plantaginaceae (è»Šå‰ç§‘)", drug:"Plantaginis Herba", sci:"Plantago asiatica", note:"æœ‰ç€‰ä¸‹åŠŸç”¨"},
        {name:"èƒ¡æ¤’", family:"Piperaceae (èƒ¡æ¤’ç§‘)", drug:"Piperis Nigri Fructus", sci:"Piper nigrum", note:"èƒ¡æ¤’æœ"},
        {name:"è›‡åºŠå­", family:"Apiaceae (ç¹–å½¢ç§‘)", drug:"Cnidii Fructus", sci:"Cnidium monnieri", note:"æ²»é™½ç—¿ã€å®®å†·ä¸å­•ã€é€£é™½å…«åº§"},
        {name:"æª³æ¦”å­", family:"Arecaceae (æ£•æ«šç§‘)", drug:"Arecae Semen", sci:"Areca catechu", note:"å« Arecoline (æª³æ¦”é¹¼)"},
        {name:"æœä»²", family:"Eucommiaceae (æœä»²ç§‘)", drug:"Eucommiae Cortex", sci:"Eucommia ulmoides", note:"æ²’æœ‰ç€‰ä¸‹ã€æŠ˜æ–·æœ‰çµ²ã€ä¸€ç§‘ä¸€å±¬ã€é›Œé›„ç•°æ ªã€æ¨¹çš®å¼·å£¯è—¥"},
        {name:"åšæœ´", family:"Magnoliaceae (æœ¨è˜­ç§‘)", drug:"Magnoliae Cortex", sci:"Magnolia officinalis", note:"è—¥ç”¨è–çš®"},
        {name:"è‚‰æ¡‚", family:"Lauraceae (æ¨Ÿç§‘)", drug:"Cinnamomi Cortex", sci:"Cinnamomum cassia", note:"å« Cinnamaldehyde"},
        {name:"é»ƒæŸ", family:"Rutaceae (èŠ¸é¦™ç§‘)", drug:"Phellodendri Cortex", sci:"Phellodendron amurense", note:"å« Berberineã€è‹¦å‘³å¥èƒƒã€è·Œæ‰“æå‚·è—¥"}
    ];

    const input = document.getElementById('searchInput');
    const suggestionsBox = document.getElementById('suggestions');
    const resultsArea = document.getElementById('results-area');

    // ç›£è½è¼¸å…¥äº‹ä»¶ï¼šç”¢ç”Ÿå»ºè­°è©
    input.addEventListener('input', function() {
        const val = this.value.toLowerCase().trim();
        suggestionsBox.innerHTML = '';
        
        if (!val) {
            suggestionsBox.style.display = 'none';
            resultsArea.innerHTML = ''; // æ¸…ç©ºçµæœ
            return;
        }

        // éæ¿¾é‚è¼¯ï¼šåªè¦ä»»ä¸€æ¬„ä½åŒ…å«è¼¸å…¥å­—ä¸²å°±æŠ“å‡ºä¾†
        const matches = db.filter(item => {
            return item.name.includes(val) || 
                   item.family.toLowerCase().includes(val) ||
                   item.drug.toLowerCase().includes(val) ||
                   item.sci.toLowerCase().includes(val) ||
                   item.note.toLowerCase().includes(val);
        });

        if (matches.length > 0) {
            suggestionsBox.style.display = 'block';
            matches.forEach(item => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                // å»ºè­°è©é¡¯ç¤ºæ ¼å¼ï¼šè—¥å (ç§‘å)
                div.innerHTML = `<span class="s-main">${item.name}</span><span class="s-sub">${item.family}</span>`;
                
                // é»æ“Šå»ºè­°è©å¾Œçš„å‹•ä½œ
                div.onclick = function() {
                    input.value = item.name; // å¡«å…¥è¼¸å…¥æ¡†
                    suggestionsBox.style.display = 'none'; // éš±è—å»ºè­°
                    displayResult(item); // é¡¯ç¤ºè©³ç´°å¡ç‰‡
                };
                suggestionsBox.appendChild(div);
            });
        } else {
            suggestionsBox.style.display = 'none';
        }
    });

    // é»æ“Šé é¢å…¶ä»–åœ°æ–¹æ™‚ï¼Œé—œé–‰å»ºè­°é¸å–®
    document.addEventListener('click', function(e) {
        if (e.target !== input && e.target !== suggestionsBox) {
            suggestionsBox.style.display = 'none';
        }
    });

    // æ”¯æ´æŒ‰ Enter æœå°‹ (é¡¯ç¤ºæ‰€æœ‰ç¬¦åˆé …ç›®)
    input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            const val = this.value.toLowerCase().trim();
            suggestionsBox.style.display = 'none';
            
            const matches = db.filter(item => {
                return item.name.includes(val) || 
                       item.family.toLowerCase().includes(val) ||
                       item.drug.toLowerCase().includes(val) ||
                       item.sci.toLowerCase().includes(val) ||
                       item.note.toLowerCase().includes(val);
            });
            
            resultsArea.innerHTML = "";
            if(matches.length === 0) {
                resultsArea.innerHTML = "<p style='text-align:center; color:#666; margin-top:20px;'>æ‰¾ä¸åˆ°ç¬¦åˆçš„è—¥æ...</p>";
            } else {
                matches.forEach(item => displayResult(item, true)); // true ä»£è¡¨æ˜¯é™„åŠ æ¨¡å¼
            }
        }
    });

    // é¡¯ç¤ºè©³ç´°è³‡æ–™å¡ç‰‡
    function displayResult(item, append = false) {
        if (!append) resultsArea.innerHTML = ""; // å¦‚æœä¸æ˜¯åˆ—è¡¨æ¨¡å¼ï¼Œå…ˆæ¸…ç©º

        const div = document.createElement("div");
        div.className = "result-card";
        div.innerHTML = `
            <div class="r-header">
                <span class="r-name">${item.name}</span>
                <span class="r-family">${item.family}</span>
            </div>
            <div class="r-detail-row"><span class="label">ç”Ÿè—¥å:</span> ${item.drug}</div>
            <div class="r-detail-row"><span class="label">å­¸å:</span> ${item.sci}</div>
            <div class="r-detail-row"><span class="label">å‚™è¨»:</span> ${item.note}</div>
        `;
        resultsArea.appendChild(div);
    }
</script>

</body>
</html>
